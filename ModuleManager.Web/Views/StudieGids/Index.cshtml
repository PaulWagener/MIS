@model ModuleManager.Web.ViewModels.StudiegidsViewModel

<div class="container">
    <div class="row">
        <div id="primary">
            <div class="col-md-12">
                <ol class="breadcrumb">
                    <li><a href="@Url.Action("Index", "Home")">Home</a></li>
                    <li class="active">LessenTabel</li>
                </ol>
            </div>
            <div class="col-md-12">
                <div class="pull-right">
                    <a class="btn btn-default" href="@Url.Action("Index", "Home")">Terug</a>
                    <a class="btn btn-success" href="#"><i class="fa fa-download"></i> Exporteren</a>
                </div>

                @foreach (var opleidingsfasen in Model.Opleidingsfasen)
                {
                    foreach (var tabellen in opleidingsfasen.Tabellen)
                    {
                        <h1>@opleidingsfasen.FaseType - @tabellen.FaseNaam</h1>
                        var title = "Blok " + tabellen.Blok + " (" + tabellen.Semester + "e Semester)";

                        <h3>@title</h3>
                        <table class="table table-bordered table-condensed">
                            <thead>
                                <tr style="background: #DA0046; color: #FFFFFF;"><!-- style="background: #FDF4EA -->
                                    <td>Onderdeel</td><td>Cursus</td><td>Omschrijving</td><td>CU</td><td>WV</td><td>Toetscode</td><td>Toetsvorm</td><td>EC</td><td>Min</td>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach(var onderdeel in tabellen.Onderdelen) 
                                {
                                    @onderdeel.Onderdeel
                                    foreach (var module in onderdeel.Modules)
                                    {

                                         if (module.Studiepunten.Count == 1)
                                         {
                                             <tr>
                                                 <td>@module.Onderdeel</td>
                                                 <td>@module.Cursuscode</td>
                                                 <td>@module.Omschrijving</td>
                                                 <td>@module.Contacturen</td>
                                                 <td>@module.Werkvormen</td>
                                                 <td>@module.Studiepunten.First().ToetsCode</td>
                                                 <td>@module.Studiepunten.First().Toetsvorm</td>
                                                 <td>@module.Studiepunten.First().EC</td>
                                                 <td>@module.Studiepunten.First().Minimum</td>
                                             </tr>
                                         }
                                         else if (module.Studiepunten.Count >= 2)
                                         {
                                             int count = @module.Studiepunten.Count;
                                             <tr>
                                                 <td rowspan="@count">@module.Onderdeel</td>
                                                 <td rowspan="@count">@module.Cursuscode</td>
                                                 <td rowspan="@count">@module.Omschrijving</td>
                                                 <td rowspan="@count">@module.Contacturen</td>
                                                 <td rowspan="@count">@module.Werkvormen</td>
                                                 <td>@module.Studiepunten.First().ToetsCode</td>
                                                 <td>@module.Studiepunten.First().Toetsvorm</td>
                                                 <td>@module.Studiepunten.First().EC</td>
                                                 <td>@module.Studiepunten.First().Minimum</td>
                                             </tr>

                                             var module1 = module;
                                             foreach (var studiePunt in module.Studiepunten.Where(s => s != module1.Studiepunten.First()))
                                             {
                                                 <tr>
                                                     <td>@studiePunt.ToetsCode</td>
                                                     <td>@studiePunt.Toetsvorm</td>
                                                     <td>@studiePunt.EC</td>
                                                     <td>@studiePunt.Minimum</td>
                                                 </tr>
                                             }
                                         }
                                     }
                                }
                                <tr style="background: #CDEBF0;">
                                    <td colspan="2"></td>
                                    <th>Totaal</th>
                                    <th>@tabellen.TotaleContactUren</th>
                                    <td colspan="2"></td>
                                    <th>Totaal</th>
                                    <th>@tabellen.TotaleEcs</th>
                                    <td></td>
                                </tr>
                            </tbody>
                        </table>
                    }
                }
            </div>
        </div>
    </div>
</div>
